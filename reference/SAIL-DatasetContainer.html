<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>DatasetContainer — DatasetContainer • SAILR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="DatasetContainer — DatasetContainer"><meta name="description" content="A container describing the datasets associated with a project
An override for the length() function that dispatches the call to the instance's DatasetContainer$length method
Subscript operator overload to retrieve one or more table references
derived from the indexed dataset(s)
Subscript operator overload to retrieve one or more table references
derived from the indexed dataset(s)"><meta property="og:description" content="A container describing the datasets associated with a project
An override for the length() function that dispatches the call to the instance's DatasetContainer$length method
Subscript operator overload to retrieve one or more table references
derived from the indexed dataset(s)
Subscript operator overload to retrieve one or more table references
derived from the indexed dataset(s)"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SAILR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Connection.html">Connection</a></li>
    <li><a class="dropdown-item" href="../articles/DatasetContainer.html">DatasetContainer</a></li>
    <li><a class="dropdown-item" href="../articles/Profile.html">Profile</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>DatasetContainer</h1>

      <div class="d-none name"><code>SAIL-DatasetContainer.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A container describing the datasets associated with a project</p>
<p>An override for the <code><a href="https://rdrr.io/r/base/length.html" class="external-link">length()</a></code> function that dispatches the call to the instance's <code>DatasetContainer$length</code> method</p>
<p>Subscript operator overload to retrieve one or more table references
derived from the indexed dataset(s)</p>
<p>Subscript operator overload to retrieve one or more table references
derived from the indexed dataset(s)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'DatasetContainer'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">obj</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'DatasetContainer'</span></span>
<span><span class="va">obj</span><span class="op">[</span><span class="va">...</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># S3 method for class 'DatasetContainer'</span></span>
<span><span class="va">obj</span><span class="op">[[</span><span class="va">...</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-obj">obj<a class="anchor" aria-label="anchor" href="#arg-obj"></a></dt>
<dd><p>(<code>&lt;DatasetContainer&gt;</code>)<br>
Some <code>DatasetContainer</code> instance</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Optional varargs for the <code>length</code> function</p></dd>


<dt id="arg-datasets">datasets<a class="anchor" aria-label="anchor" href="#arg-datasets"></a></dt>
<dd><p>(<code>character|vector</code>)<br>
The datasets to index</p></dd>


<dt id="arg-dataset">dataset<a class="anchor" aria-label="anchor" href="#arg-dataset"></a></dt>
<dd><p>(<code>character</code>)<br>
The dataset to index</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A string representation of the <code>DatasetContainer</code> instance</p>
<p>The dataset references, if contained by this instance</p>
<p>A dataset reference, if contained by this instance</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This helper helper class can be used to:</p><ol><li><p><strong><em>Utilities</em></strong> – Dataset-related utility methods, <em>e.g.</em> confirming access permissions, collecting the newest refresh tables <em>etc</em></p></li>
<li><p><strong><em>Parameterisation</em></strong> – General interface to parameterise a set of datasets to be used by a user-defined function and/or method</p></li>
<li><p><strong><em>Validation</em></strong> – Can be used by user-defined operations to validate the inclusion of projects</p></li>
<li><p><strong><em>Documentation</em></strong> – An inline documentation of the datasets associated with a project</p></li>
</ol><p>Several options are available to modify this instance's behaviour that can either be modified globally or on a per call basis:</p><ol><li><p><strong><em>SAILR.QUIET</em></strong>: Determines whether the <code>DatasetContainer</code> methods will log debug information</p></li>
<li><p><strong><em>SAILR.NO.WARN</em></strong>: Determines whether warnings will be logged to the console</p></li>
<li><p><strong><em>SAILR.THROW.ERRORS</em></strong>: Specifies whether the current thread should be halted when an error is encountered; you are expected to wrap your <code><a href="SAIL-Connection.html">SAILR::Connection</a></code> calls with an error handler if you deactivate this option</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>reference</code></dt>
<dd><p>(<code>list</code>)<br>
A private reference to the datasets contained by this instance</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="active-bindings">Active bindings<a class="anchor" aria-label="anchor" href="#active-bindings"></a></h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>reference</code></dt>
<dd><p>(<code>list</code>)<br>
A private reference to the datasets contained by this instance</p></dd>


<dt><code>datasets</code></dt>
<dd><p>(<code>character|NA</code>)<br>
A read-only field describing the datasets contained by this instance</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-DatasetContainer-new"><code>DatasetContainer$new()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-get"><code>DatasetContainer$get()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-set"><code>DatasetContainer$set()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-retrieve"><code>DatasetContainer$retrieve()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-require.datasets"><code>DatasetContainer$require.datasets()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-require.like"><code>DatasetContainer$require.like()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-require.access"><code>DatasetContainer$require.access()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-require.shape"><code>DatasetContainer$require.shape()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-%5B"><code>DatasetContainer$[()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-%5B%5B"><code>DatasetContainer$[[()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-length"><code>DatasetContainer$length()</code></a></p></li>
<li><p><a href="#method-DatasetContainer-clone"><code>DatasetContainer$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-DatasetContainer-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Initialise a new DatasetContainer</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/SAIL-DatasetContainer.html">DatasetContainer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>A set of datasets to be contained by this instance, all arguments should be named unless given as a <code>DatasetContainer$ref</code>. See the <code>$intliaze</code> Example section</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A new DatasetContainer instance</p>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# Initialise the container...
datasets = DatasetContainer$new(
  # Some reference table unknown to \code{SAILR.METADATA}; character string references must be a named argument and can't be a reserved name - see \code{DatasetContainer$is.reserved}
  some.table               = 'SAILREFRV.SOME_TABLE',
  # Some project table unknown \code{SAILR.METADATA}; refresh dates should be appended to the name as usual - these can be refreshed using the \code{DatasetContainer$pull.refresh} method
  other.table              = 'SAILXXXV.OTHER_TABLE_20240905',
  # Include some reference table, no schema is needed since this is retrieved from SAILREFRV. Note that the argument name _must_ match \code{DatasetContainer$ref}'s \code{$ref} property if you are using a named argument
  sailref.wimd2019.sm.area = DatasetContainer$ref('sailref.wimd2019.sm.area'),
  # Include some reference table from a project schema; and, as above, the argument name must match the reference name
  adde.deaths              = DatasetContainer$ref('adde.deaths', 'SAILXXXV'),
  # Include a specific refresh of some reference table from a project schema; and, as above, the argument name must match
  abde.births              = DatasetContainer$ref('abde.births', 'SAILXXXV', date='20240905'),
  DatasetContainer$ref('wdsd.pers', 'SAILXXXV', '20240905')
)
}

</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-DatasetContainer-get"></a><div class="section">
<h3 id="method-get-">Method <code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code><a class="anchor" aria-label="anchor" href="#method-get-"></a></h3>
<p>Get the table reference name of the dataset in the shape of <code>[SCHEMA].[TABLE]</code></p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>dataset</code></dt>
<dd><p>(<code>character</code>)<br>
The name of the dataset to select</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>Either (a) a character string representing the table reference if contained by this instance; otherwise (b) an <code>NA</code> value</p>
</div>

</div><p></p><hr><a id="method-DatasetContainer-set"></a><div class="section">
<h3 id="method-set-">Method <code>set()</code><a class="anchor" aria-label="anchor" href="#method-set-"></a></h3>
<p>Sets the key-value pair for the given dataset</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="va">dataset</span>, <span class="va">reference</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>dataset</code></dt>
<dd><p>(<code>character</code>)<br>
The name of the dataset to update</p></dd>


<dt><code>reference</code></dt>
<dd><p>(<code>character|DatasetContainer$ref</code>)<br>
The table reference in the shape of <code>[SCHEMA].[TABLE]</code>, or a reference structure generated by the <code>DatasetContainer$ref</code> static method</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>The reference to this instance which can be used for chaining, <em>e.g.</em> <code>dataset$set('gp.event', 'schema.table')$set('pedw.spell', 'schema.table')</code></p>
</div>

</div><p></p><hr><a id="method-DatasetContainer-retrieve"></a><div class="section">
<h3 id="method-retrieve-">Method <code>retrieve()</code><a class="anchor" aria-label="anchor" href="#method-retrieve-"></a></h3>
<p>Retrieves information relating to the specified dataset(s)</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">retrieve</span><span class="op">(</span></span>
<span>  <span class="va">dataset</span>,</span>
<span>  properties <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  stop.on.error <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"SAILR.THROW.ERRORS"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  suppress.warnings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"SAILR.NO.WARN"</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>dataset</code></dt>
<dd><p>(<code>character|vector|list</code>)<br>
The name of the dataset, or a vector/list of dataset names</p></dd>


<dt><code>properties</code></dt>
<dd><p>(<code>list|vector</code>)<br>
An optional flat list or vector of characters specifying which properties to retrieve, see the <code>DatasetContainer$get</code> example section for more information</p></dd>


<dt><code>stop.on.error</code></dt>
<dd><p>(<code>logical</code>)<br>
Whether to return a <code>FALSE</code> logical when an error is encountered instead of stopping the execution of the parent thread; defaults to <code>option(SAILR.THROW.ERRORS=TRUE)</code></p></dd>


<dt><code>suppress.warnings</code></dt>
<dd><p>(<code>logical</code>)<br>
Whether to suppress warnings; defaults to <code>option(SAILR.NO.WARN=FALSE)</code></p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-1">Details<a class="anchor" aria-label="anchor" href="#details-1"></a></h4>

<table class="table table"><tr><td>Key</td><td>Parent</td><td>Details</td></tr><tr><td>date</td><td>Top-level</td><td>The selected table date</td></tr><tr><td>schema</td><td>Top-level</td><td>The dataset schema</td></tr><tr><td>relation</td><td>Top-level</td><td>The dataset type</td></tr><tr><td>reference</td><td>Top-level</td><td>The table <code>[SCHEMA].[TABLE]</code> reference</td></tr><tr><td>dataset</td><td>Top-level</td><td>The dataset object</td></tr><tr><td>ref</td><td><code>$dataset</code></td><td>The key used to contain this reference</td></tr><tr><td>alt</td><td><code>$dataset</code></td><td>Whether this dataset prepends a prefix to its table name</td></tr><tr><td>tag</td><td><code>$dataset</code></td><td>How dates are appended to the table name</td></tr><tr><td>name</td><td><code>$dataset</code></td><td>The name of the dataset</td></tr><tr><td>origin</td><td><code>$dataset</code></td><td>Where this dataset originated</td></tr><tr><td>static</td><td><code>$dataset</code></td><td>Whether this dataset is copied to a project, or is hosted in its origin schema</td></tr></table></div>

<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>Either:</p><ol><li><p>If the dataset is present and no properties provided – a list describing the dataset (or a list of lists if multiple datasets were selected)</p></li>
<li><p>If the dataset is present with the given properties – a key-value pair list containing the information requested (or a list of lists if multiple datasets were selected)</p></li>
<li><p>If no dataset by this name is present – a <code>NA</code> value</p></li>
</ol></div>

</div><p></p><hr><a id="method-DatasetContainer-require.datasets"></a><div class="section">
<h3 id="method-require-datasets-">Method <code>require.datasets()</code><a class="anchor" aria-label="anchor" href="#method-require-datasets-"></a></h3>
<p>Tests whether the given datasets have been defined within the DatasetContainer</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">require.datasets</span><span class="op">(</span><span class="va">datasets</span>, assert <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>datasets</code></dt>
<dd><p>(<code>character|list|vector</code>)<br>
A scalar character describing a single dataset, or a list/vector of characters describing which datasets should be refreshed. If the specified dataset element is named, <em>e.g.</em> <code>list(abde.births='ABDE_BIRTHS_20240630')</code>, this method will test both that the <code>abde.births</code> is present &amp; that it refers to the <code>ABDE_BIRTHS_20240630</code> table. Note that including a schema, <em>e.g.</em> <code>SAIL####V.ABDE_BIRTHS_20240630</code>, will test both the schema and the dataset name.</p></dd>


<dt><code>assert</code></dt>
<dd><p>(<code>logical|NA</code>)<br>
An optional logical that describes whether to throw an error and to stop the execution of the current thread if one or more of the datasets aren't present; defaults to <code>TRUE</code></p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p>A logical describing whether the datasets are contained by this instance</p>
</div>

</div><p></p><hr><a id="method-DatasetContainer-require.like"></a><div class="section">
<h3 id="method-require-like-">Method <code>require.like()</code><a class="anchor" aria-label="anchor" href="#method-require-like-"></a></h3>
<p>Tests whether a dataset's reference refers to a specific relation type</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">require.like</span><span class="op">(</span><span class="va">datasets</span>, <span class="va">relation</span>, assert <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>datasets</code></dt>
<dd><p>(<code>character|list|vector</code>)<br>
The name of the dataset, or a list/vector of characters, specifying dataset(s) to test</p></dd>


<dt><code>relation</code></dt>
<dd><p>(<code>character</code>)<br>
A scalar character a relation comparator(s) which can be one of: <code>BASE</code>, <code>REFERENCE</code>, <code>SESSION</code>, <code>PROJECT</code>, <code>WORKSPACE</code>, <code>ENCRYPTION</code> or <code>UNKNOWN</code> - see <code>SAILR.DEF$DREF.RELATION</code> for more details</p></dd>


<dt><code>assert</code></dt>
<dd><p>(<code>logical|NA</code>)<br>
An optional logical that describes whether to throw an error and to stop the execution of the current thread if one or more of the datasets aren't present; defaults to <code>TRUE</code></p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-2">Details<a class="anchor" aria-label="anchor" href="#details-2"></a></h4>

<table class="table table"><tr><td>Type</td><td>Schema regex</td><td>Details</td></tr><tr><td><code>BASE</code></td><td><code>^BASE</code></td><td>A base schema from which datasets are cloned</td></tr><tr><td><code>REFERENCE</code></td><td><code>^SAIL[A-Z][\w]+$</code></td><td>A dataset reference schema containing the datasets</td></tr><tr><td><code>SESSION</code></td><td><code>^SESSION$</code></td><td>A global temporary table for this session</td></tr><tr><td><code>PROJECT</code></td><td><code>^SAIL\d+V$</code></td><td>A project table cloned from <code>BASE</code>, <code>REFERENCE</code> or <code>ENCRYPTION</code></td></tr><tr><td><code>WORKSPACE</code></td><td><code>^SAILW\d+V$</code></td><td>A project workspace containing user-defined tables</td></tr><tr><td><code>ENCRYPTION</code></td><td><code>^SAILX\d+V$</code></td><td>A project-level encryption table</td></tr></table></div>

<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>
<p>A logical describing whether the dataset is</p>
</div>

</div><p></p><hr><a id="method-DatasetContainer-require.access"></a><div class="section">
<h3 id="method-require-access-">Method <code>require.access()</code><a class="anchor" aria-label="anchor" href="#method-require-access-"></a></h3>
<p>Tests whether the client has the privileges to interface with the datasets defined within this container.</p>
<p>Note that '<em>privileges</em>' could describe one of the following privileges: <code>SELECT</code>, <code>UPDATE</code>, <code>INSERT</code> <em>etc</em>. Please see IBM's documentation on
user privileges <a href="https://www.ibm.com/docs/en/bpm/8.5.6?topic=privileges-db2-database" class="external-link">here</a> for more information, or see <code>SAILR.DEF$PRIVILEGES</code></p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">require.access</span><span class="op">(</span><span class="va">db</span>, <span class="va">privileges</span>, assert <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>db</code></dt>
<dd><p>(<code>&lt;SAILR&gt;</code>)<br>
An active, valid <code>&lt;SAILR&gt;</code> database connection</p></dd>


<dt><code>privileges</code></dt>
<dd><p>(<code>list</code>)<br>
A named list in which the key describes the dataset, and where the value describes which privileges are required, <em>e.g.</em> <code>list(gp.events=c('INSERT', 'SELECT'), pedw.spell='ALL')</code>. Note that <code>ALL</code> expands to all privileges described by <code>SAILR.DEF$PRIVILEGES</code></p></dd>


<dt><code>assert</code></dt>
<dd><p>(<code>logical|NA</code>)<br>
An optional logical that describes whether to throw an error and to stop the execution of the current thread if one or more of the datasets aren't present; defaults to <code>TRUE</code></p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-6">Returns<a class="anchor" aria-label="anchor" href="#returns-6"></a></h4>
<p>A logical reflecting whether the client has the privileges to interface with the datasets</p>
</div>

</div><p></p><hr><a id="method-DatasetContainer-require.shape"></a><div class="section">
<h3 id="method-require-shape-">Method <code>require.shape()</code><a class="anchor" aria-label="anchor" href="#method-require-shape-"></a></h3>
<p>Tests whether the given dataset(s) meet the selected criteria by ensuring each of its columns and their datatypes
match those specified</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">require.shape</span><span class="op">(</span><span class="va">db</span>, <span class="va">criteria</span>, assert <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>db</code></dt>
<dd><p>(<code>&lt;SAILR&gt;</code>)<br>
An active, valid <code>&lt;SAILR&gt;</code> database connection</p></dd>


<dt><code>criteria</code></dt>
<dd><p>(<code>list</code>)<br>
A list of column criteria for one or more dataset(s), <em>e.g.</em> <code>list(gp.event=list(ALF_PE='BIGINTEGER))}, in which each key of each inner list describes of the column name(s) and the value(s) specify the required column's type. Do note that types are fuzzy matched to exclude matching on size unless explicitly specified, <em>e.g.</em> <code>list(some.table=list(SOME_TEXT_COL='VARCHAR'))</code> <em>v.s.</em> <code>list(some.table=list(SOME_TEXT_COL='VARCHAR(200)'))</code>. Please do note that names, columns and types are case sensitive.</code></p>
<p><code>assert</code>(<code>logical|NA</code>)<br>
An optional logical that describes whether to throw an error and to stop the execution of the current thread if one or more of the datasets aren't present; defaults to <code>TRUE</code></p></dd>

html</dl></div>


<div class="section">
<h5 id="returns-7">Returns<a class="anchor" aria-label="anchor" href="#returns-7"></a></h5>
<p>A logical reflecting whether the criteria has been met</p>
</div>

</div><p></p><hr><a id="method-DatasetContainer-["></a><div class="section">
<h4 id="method-">Method <code>[()</code><a class="anchor" aria-label="anchor" href="#method-"></a></h4>
<p>Subscript operator overload to retrieve one or more table references
derived from the indexed dataset(s)</p><div class="section">
<h5 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h5>
<p></p><div class="r"><div class="sourceCode"><pre><code>DatasetContainer$[(datasets)</code></pre></div><p></p></div>
</div>

<div class="section">
<h5 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h5>
<p></p><div class="arguments"><dl><dt><code>datasets</code></dt>
<dd><p>(<code>character|vector</code>)<br>
The datasets to index</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h5 id="returns-8">Returns<a class="anchor" aria-label="anchor" href="#returns-8"></a></h5>
<p>The dataset references, if contained by this instance</p>
</div>
<div class="section">
<h5 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a></h5>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
some.container[c('gp.event', 'other.table')]
}

</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-DatasetContainer-[["></a><div class="section">
<h4 id="method--1">Method <code>[[()</code><a class="anchor" aria-label="anchor" href="#method--1"></a></h4>
<p>Subscript operator overload to retrieve one or more table references
derived from the indexed dataset(s)</p><div class="section">
<h5 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h5>
<p></p><div class="r"><div class="sourceCode"><pre><code>DatasetContainer$[[(dataset)</code></pre></div><p></p></div>
</div>

<div class="section">
<h5 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h5>
<p></p><div class="arguments"><dl><dt><code>dataset</code></dt>
<dd><p>(<code>character</code>)<br>
The dataset to index</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h5 id="returns-9">Returns<a class="anchor" aria-label="anchor" href="#returns-9"></a></h5>
<p>A dataset reference, if contained by this instance</p>
</div>
<div class="section">
<h5 id="examples-2">Examples<a class="anchor" aria-label="anchor" href="#examples-2"></a></h5>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
some.container[['gp.event']]
}

</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-DatasetContainer-length"></a><div class="section">
<h4 id="method-length-">Method <code><a href="https://rdrr.io/r/base/length.html" class="external-link">length()</a></code><a class="anchor" aria-label="anchor" href="#method-length-"></a></h4>
<p>Compute the length of the datasets contained by this instance</p><div class="section">
<h5 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h5>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">length</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h5 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h5>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>Optional varargs from the <code>length</code> call</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h5 id="returns-10">Returns<a class="anchor" aria-label="anchor" href="#returns-10"></a></h5>
<p>An integer describing the number of datasets referenced by this instance</p>
</div>

</div><p></p><hr><a id="method-DatasetContainer-clone"></a><div class="section">
<h4 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h4>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h5 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h5>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h5 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h5>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `DatasetContainer$new`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Initialise the container...</span></span></span>
<span class="r-in"><span><span class="va">datasets</span> <span class="op">=</span> <span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="co"># Some reference table unknown to \code{SAILR.METADATA}; character string references must be a named argument and can't be a reserved name - see \code{DatasetContainer$is.reserved}</span></span></span>
<span class="r-in"><span>  some.table               <span class="op">=</span> <span class="st">'SAILREFRV.SOME_TABLE'</span>,</span></span>
<span class="r-in"><span>  <span class="co"># Some project table unknown \code{SAILR.METADATA}; refresh dates should be appended to the name as usual - these can be refreshed using the \code{DatasetContainer$pull.refresh} method</span></span></span>
<span class="r-in"><span>  other.table              <span class="op">=</span> <span class="st">'SAILXXXV.OTHER_TABLE_20240905'</span>,</span></span>
<span class="r-in"><span>  <span class="co"># Include some reference table, no schema is needed since this is retrieved from SAILREFRV. Note that the argument name _must_ match \code{DatasetContainer$ref}'s \code{$ref} property if you are using a named argument</span></span></span>
<span class="r-in"><span>  sailref.wimd2019.sm.area <span class="op">=</span> <span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">ref</span><span class="op">(</span><span class="st">'sailref.wimd2019.sm.area'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="co"># Include some reference table from a project schema; and, as above, the argument name must match the reference name</span></span></span>
<span class="r-in"><span>  adde.deaths              <span class="op">=</span> <span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">ref</span><span class="op">(</span><span class="st">'adde.deaths'</span>, <span class="st">'SAILXXXV'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="co"># Include a specific refresh of some reference table from a project schema; and, as above, the argument name must match</span></span></span>
<span class="r-in"><span>  abde.births              <span class="op">=</span> <span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">ref</span><span class="op">(</span><span class="st">'abde.births'</span>, <span class="st">'SAILXXXV'</span>, date<span class="op">=</span><span class="st">'20240905'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="va">DatasetContainer</span><span class="op">$</span><span class="fu">ref</span><span class="op">(</span><span class="st">'wdsd.pers'</span>, <span class="st">'SAILXXXV'</span>, <span class="st">'20240905'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `DatasetContainer$[`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">some.container</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'gp.event'</span>, <span class="st">'other.table'</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `DatasetContainer$[[`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">some.container</span><span class="op">[[</span><span class="st">'gp.event'</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jack Scanlon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

